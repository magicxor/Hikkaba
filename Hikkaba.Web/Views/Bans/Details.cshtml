@using Humanizer
@model Hikkaba.Web.ViewModels.BansViewModels.BanViewModel
@inject TimeProvider TimeProvider
@{
    ViewData["Title"] = "Details";
}

@{
  var utcNow = TimeProvider.GetUtcNow().UtcDateTime;
  var timeTillUnban = Model.EndsAt.HasValue && utcNow < Model.EndsAt
    ? Model.EndsAt - utcNow
    : null;
  var timeTillUnbanStr = !Model.EndsAt.HasValue
    ? "banned permanently"
    : timeTillUnban.HasValue ? $"ban expires in {timeTillUnban.Value.Humanize(2)}" : "ban expired";
}

<dl class="dl-horizontal">
    <dt>@Html.DisplayNameFor(model => model.EndsAt)</dt>
    <dd>@Html.DisplayFor(model => model.EndsAt) (@(timeTillUnbanStr))</dd>

    <dt>@Html.DisplayNameFor(model => model.BannedIpAddress)</dt>
    <dd>@Html.DisplayFor(model => model.BannedIpAddress)</dd>

    <dt>@Html.DisplayNameFor(model => model.BannedCidrLowerIpAddress)</dt>
    <dd>@Html.DisplayFor(model => model.BannedCidrLowerIpAddress)</dd>

    <dt>@Html.DisplayNameFor(model => model.BannedCidrUpperIpAddress)</dt>
    <dd>@Html.DisplayFor(model => model.BannedCidrUpperIpAddress)</dd>

    <dt>@Html.DisplayNameFor(model => model.Reason)</dt>
    <dd>@Html.DisplayFor(model => model.Reason)</dd>

    <dt>@Html.DisplayNameFor(model => model.CreatedAt)</dt>
    <dd>@Html.DisplayFor(model => model.CreatedAt)</dd>

    <dt>@Html.DisplayNameFor(model => model.ModifiedAt)</dt>
    <dd>@Html.DisplayFor(model => model.ModifiedAt)</dd>

    <dt>@Html.DisplayNameFor(model => model.IsDeleted)</dt>
    <dd>@Html.DisplayFor(model => model.IsDeleted)</dd>
</dl>
